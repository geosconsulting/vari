{"openapi":"3.1.0","info":{"title":"DBSM API","description":"API for accessing the Digital Building Stock Model dataset","version":"1.0.0"},"paths":{"/":{"get":{"summary":"Root","description":"Root endpoint with API information","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object","title":"Response Root  Get"}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Health check endpoint with environment and database info","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/countries":{"get":{"summary":"List Countries","description":"List all available countries with building data","operationId":"list_countries_countries_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CountryInfo"},"type":"array","title":"Response List Countries Countries Get"}}}}}}},"/countries/{country_name}/buildings":{"get":{"summary":"Get Buildings By Country","description":"Get buildings for a specific country","operationId":"get_buildings_by_country_countries__country_name__buildings_get","parameters":[{"name":"country_name","in":"path","required":true,"schema":{"type":"string","title":"Country Name"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximum number of buildings to return","default":1000,"title":"Limit"},"description":"Maximum number of buildings to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of buildings to skip","default":0,"title":"Offset"},"description":"Number of buildings to skip"},{"name":"bbox","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Bounding box: min_lon,min_lat,max_lon,max_lat","title":"Bbox"},"description":"Bounding box: min_lon,min_lat,max_lon,max_lat"},{"name":"min_area","in":"query","required":false,"schema":{"anyOf":[{"type":"number","minimum":0},{"type":"null"}],"description":"Minimum building area","title":"Min Area"},"description":"Minimum building area"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BuildingCollection"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/countries/{country_name}/buildings/{building_id}":{"get":{"summary":"Get Building By Id","description":"Get a specific building by ID","operationId":"get_building_by_id_countries__country_name__buildings__building_id__get","parameters":[{"name":"country_name","in":"path","required":true,"schema":{"type":"string","title":"Country Name"}},{"name":"building_id","in":"path","required":true,"schema":{"type":"integer","title":"Building Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Building"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/countries/{country_name}/stats":{"get":{"summary":"Get Country Stats","description":"Get statistics for buildings in a country","operationId":"get_country_stats_countries__country_name__stats_get","parameters":[{"name":"country_name","in":"path","required":true,"schema":{"type":"string","title":"Country Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Country Stats Countries  Country Name  Stats Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/buildings/within/{distance}":{"get":{"summary":"Buildings Within Distance","description":"Find buildings within the specified distance of a point","operationId":"buildings_within_distance_buildings_within__distance__get","parameters":[{"name":"distance","in":"path","required":true,"schema":{"type":"number","description":"Distance in meters","title":"Distance"},"description":"Distance in meters"},{"name":"lat","in":"query","required":true,"schema":{"type":"number","description":"Latitude","title":"Lat"},"description":"Latitude"},{"name":"lon","in":"query","required":true,"schema":{"type":"number","description":"Longitude","title":"Lon"},"description":"Longitude"},{"name":"country","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Country filter","title":"Country"},"description":"Country filter"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"default":100,"title":"Limit"}},{"name":"download","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Format: geojson or csv","title":"Download"},"description":"Format: geojson or csv"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/buildings/{country}/nearest/{lat}/{lon}":{"get":{"summary":"Nearest Buildings","description":"Get nearest buildings to coordinates","operationId":"nearest_buildings_buildings__country__nearest__lat___lon__get","parameters":[{"name":"country","in":"path","required":true,"schema":{"type":"string","title":"Country"}},{"name":"lat","in":"path","required":true,"schema":{"type":"number","maximum":90,"minimum":-90,"title":"Lat"}},{"name":"lon","in":"path","required":true,"schema":{"type":"number","maximum":180,"minimum":-180,"title":"Lon"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/buildings/buffer/{building_id}/{distance}":{"get":{"summary":"Building Buffer","description":"Create a buffer zone around a building","operationId":"building_buffer_buildings_buffer__building_id___distance__get","parameters":[{"name":"building_id","in":"path","required":true,"schema":{"type":"integer","title":"Building Id"}},{"name":"distance","in":"path","required":true,"schema":{"type":"number","description":"Buffer distance in meters","title":"Distance"},"description":"Buffer distance in meters"},{"name":"country","in":"query","required":true,"schema":{"type":"string","description":"Country code","title":"Country"},"description":"Country code"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/buildings/size-distribution/{country}":{"get":{"summary":"Building Size Distribution","description":"Get building size distribution statistics","operationId":"building_size_distribution_buildings_size_distribution__country__get","parameters":[{"name":"country","in":"path","required":true,"schema":{"type":"string","title":"Country"}},{"name":"bins","in":"query","required":false,"schema":{"type":"integer","description":"Number of histogram bins","default":10,"title":"Bins"},"description":"Number of histogram bins"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/buildings/export/{format}":{"get":{"summary":"Export Buildings","description":"Export buildings in the specified format","operationId":"export_buildings_buildings_export__format__get","parameters":[{"name":"format","in":"path","required":true,"schema":{"$ref":"#/components/schemas/ExportFormat"}},{"name":"country","in":"query","required":true,"schema":{"type":"string","title":"Country"}},{"name":"bbox","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bbox"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":10000,"description":"Maximum number of buildings to return","default":100,"title":"Limit"},"description":"Maximum number of buildings to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/nuts/{code}":{"get":{"summary":"Get Nuts","operationId":"get_nuts_nuts__code__get","parameters":[{"name":"code","in":"path","required":true,"schema":{"type":"string","title":"Code"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/viewer/{country_name}/{bbox}":{"get":{"summary":"Viewer","description":"Get buildings for a specific country (bbox required)","operationId":"viewer_viewer__country_name___bbox__get","parameters":[{"name":"country_name","in":"path","required":true,"schema":{"type":"string","title":"Country Name"}},{"name":"bbox","in":"path","required":true,"schema":{"type":"string","title":"Bbox"}},{"name":"description","in":"query","required":false,"schema":{"default":"Bounding box for selection","title":"Description"}},{"name":"min_area","in":"query","required":false,"schema":{"anyOf":[{"type":"number","minimum":0},{"type":"null"}],"description":"Minimum building area","title":"Min Area"},"description":"Minimum building area"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/buildings/buffer":{"get":{"summary":"Get Buildings By Buffer","description":"Return buildings within a buffer around a point (lat, lon).","operationId":"get_buildings_by_buffer_buildings_buffer_get","parameters":[{"name":"lat","in":"query","required":true,"schema":{"type":"number","description":"Latitude of the center point","title":"Lat"},"description":"Latitude of the center point"},{"name":"lon","in":"query","required":true,"schema":{"type":"number","description":"Longitude of the center point","title":"Lon"},"description":"Longitude of the center point"},{"name":"buffer","in":"query","required":true,"schema":{"type":"number","description":"Buffer radius in meters","title":"Buffer"},"description":"Buffer radius in meters"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Building":{"properties":{"type":{"type":"string","title":"Type","default":"Feature"},"id":{"type":"integer","title":"Id"},"geometry":{"additionalProperties":true,"type":"object","title":"Geometry"},"properties":{"additionalProperties":true,"type":"object","title":"Properties"}},"type":"object","required":["id","geometry","properties"],"title":"Building","example":{"geometry":{"coordinates":[[[0,0],[0,1],[1,1],[1,0],[0,0]]],"type":"Polygon"},"gid":1,"properties":{"unique_id":"AT_1234","source":"OSM","height":10.5,"shapefactor":0.8,"epoch":"1900-1945","use":"residential","area":150.5,"perimeter":50.2},"type":"Feature"}},"BuildingCollection":{"properties":{"type":{"type":"string","title":"Type","default":"FeatureCollection"},"features":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Features"},"count":{"type":"integer","title":"Count"},"country":{"type":"string","title":"Country"}},"type":"object","required":["features","count","country"],"title":"BuildingCollection"},"CountryInfo":{"properties":{"country_name":{"type":"string","title":"Country Name"},"table_name":{"type":"string","title":"Table Name"}},"type":"object","required":["country_name","table_name"],"title":"CountryInfo"},"ExportFormat":{"type":"string","enum":["geojson","kml","csv"],"title":"ExportFormat"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}